<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FactLens Deep Analytics</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--accent:#3b82f6;}
    body{font-family:'Inter',sans-serif;background:linear-gradient(135deg,#f8fafc 0%,#e2e8f0 100%);}
    .hero-title{background:linear-gradient(135deg,var(--accent),#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
  </style>
</head>
<body class="text-gray-900">
  <nav class="bg-white/80 backdrop-blur border-b border-gray-200/50 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 flex justify-between items-center h-16">
      <div class="flex items-center space-x-3">
        <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center"><i class="fas fa-search text-white text-sm"></i></div>
        <h1 class="text-xl font-semibold" data-i18n="brand.name">FactLens</h1>
      </div>
      <div class="flex items-center space-x-4">
        <a href="#" class="text-gray-600 hover:text-blue-600" data-i18n="nav.home">Home</a>
        <a href="#" class="text-gray-600 hover:text-blue-600" data-i18n="nav.about">About</a>
        <a href="#" class="text-gray-600 hover:text-blue-600" data-i18n="nav.demo">Demo</a>
        <select id="lang-switch" class="text-sm border rounded px-2 py-1">
          <option value="en">English</option>
          <option value="zh">中文</option>
        </select>
      </div>
    </div>
  </nav>

  <main class="max-w-7xl mx-auto px-4 py-12">
    <div class="text-center mb-12">
      <h1 class="hero-title text-4xl md:text-6xl font-bold mb-4" data-i18n="hero.title">FactLens Deep Analytics</h1>
      <p class="text-2xl text-gray-800 font-medium mb-4" data-i18n="hero.sub">Clarify facts, Surface opinions</p>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto mb-8" data-i18n="hero.desc">Paste any URL (or text) and get a color-coded fact-opinion-bias report in seconds.</p>
    </div>

    <div class="bg-white/90 backdrop-blur rounded-2xl p-8 mb-8 shadow-lg">
      <label class="block text-sm font-medium text-gray-700 mb-2"><i class="fas fa-link mr-2 text-blue-500"></i><span data-i18n="input.urlLabel">Enter a URL</span></label>
      <input id="url-input" type="url" placeholder="https://example.com/article" class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:outline-none">
      <div class="flex items-center justify-center my-6"><div class="w-full border-t border-gray-300"></div><div class="px-4 text-sm text-gray-500">or</div></div>
      <label class="block text-sm font-medium text-gray-700 mb-2"><i class="fas fa-file-alt mr-2 text-green-500"></i><span data-i18n="input.textLabel">Or paste text directly</span></label>
      <textarea id="text-input" rows="6" placeholder="Paste text here…" class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-green-500 focus:outline-none resize-none"></textarea>
      <div class="text-center mt-6">
        <button id="analyze-btn" class="px-12 py-4 text-white font-semibold rounded-lg flex items-center justify-center space-x-2 text-lg bg-gradient-to-r from-blue-500 to-purple-600 hover:scale-105 transition"><i class="fas fa-search"></i><span data-i18n="btn.analyze">Analyze</span></button>
      </div>
      <div id="progress-section" class="hidden mt-6 p-4 bg-blue-50 rounded-lg">
        <div class="flex items-center space-x-3 mb-3"><div class="loading-spinner w-5 h-5 border-2 border-blue-500 border-t-transparent rounded-full"></div><span id="progress-text" data-i18n="progress.fetch">Fetching page…</span></div>
        <div class="w-full bg-blue-200 rounded-full h-2"><div id="progress-bar" class="bg-blue-600 h-2 rounded-full" style="width:0%"></div></div>
      </div>
    </div>

    <div id="summary-banner" class="hidden bg-white/90 backdrop-blur rounded-2xl p-6 mb-6"><div class="flex items-center"><i class="fas fa-quote-left text-blue-500 mr-3"></i><span class="font-medium" data-i18n="report.conclusion">Report conclusion:</span></div><p id="total-conclusion" class="mt-2"></p></div>

    <div id="four-dim-card" class="hidden bg-white/90 backdrop-blur rounded-2xl p-8 mb-8 shadow-lg">
      <h2 class="text-2xl font-bold mb-4"><i class="fas fa-chart-line text-blue-500 mr-2"></i>Four-Dimension Score</h2>
      <div class="space-y-3 text-sm">
        <div class="flex justify-between"><span data-i18n="dim.emotion">Emotional Balance</span><span id="eb-score" class="font-mono text-orange-600">0</span></div><div class="w-full bg-gray-200 rounded-full h-2"><div id="eb-bar" class="h-2 rounded-full" style="width:0%"></div></div>
        <div class="flex justify-between"><span data-i18n="dim.transparency">Source Transparency</span><span id="ts-score" class="font-mono">0</span></div><div class="w-full bg-gray-200 rounded-full h-2"><div id="ts-bar" class="bg-blue-600 h-2 rounded-full" style="width:0%"></div></div>
        <div class="flex justify-between"><span data-i18n="dim.factDensity">Fact Density</span><span id="fd-score" class="font-mono">0</span></div><div class="w-full bg-gray-200 rounded-full h-2"><div id="fd-bar" class="bg-green-600 h-2 rounded-full" style="width:0%"></div></div>
        <div class="flex justify-between"><span data-i18n="dim.consistency">Consistency</span><span id="cs-score" class="font-mono">0</span></div><div class="w-full bg-gray-200 rounded-full h-2"><div id="cs-bar" class="bg-purple-600 h-2 rounded-full" style="width:0%"></div></div>
      </div>
      <details class="mt-4"><summary class="text-sm text-gray-500 cursor-pointer hover:text-gray-700">Show radar chart</summary><div class="mt-2 h-64"><canvas id="radar-canvas"></canvas></div></details>
    </div>

    <div id="results-section" class="hidden grid lg:grid-cols-3 gap-8 mb-8">
      <div class="bg-white/90 backdrop-blur rounded-2xl p-6 border-l-4 border-blue-600"><div class="flex items-center mb-4"><div class="w-3 h-3 bg-blue-600 rounded-full mr-3"></div><h3 class="text-lg font-semibold" data-i18n="fact.title">What’s Fact</h3></div><div id="facts-list"></div></div>
      <div class="bg-white/90 backdrop-blur rounded-2xl p-6 border-l-4 border-green-600"><div class="flex items-center mb-4"><div class="w-3 h-3 bg-green-600 rounded-full mr-3"></div><h3 class="text-lg font-semibold" data-i18n="opinion.title">What’s Opinion</h3></div><div id="opinions-list"></div></div>
      <div class="bg-white/90 backdrop-blur rounded-2xl p-6 border-l-4 border-red-600"><div class="flex items-center mb-4"><div class="w-3 h-3 bg-red-600 rounded-full mr-3"></div><h3 class="text-lg font-semibold" data-i18n="bias.title">Potential Bias</h3></div>
        <div class="space-y-3 text-sm">
          <div class="flex justify-between"><span data-i18n="bias.emotionalWords">Emotional words</span><span id="emotional-words" class="font-mono text-red-600">—</span></div>
          <div class="flex justify-between"><span data-i18n="bias.binaryOps">Binary opposition</span><span id="binary-opposition" class="font-mono text-red-600">—</span></div>
          <div class="flex justify-between"><span data-i18n="bias.motivation">Mind-reading</span><span id="motivation-guessing" class="font-mono text-red-600">—</span></div>
          <div class="flex justify-between"><span data-i18n="bias.overall">Overall slant</span><span id="overall-tendency" class="font-mono text-green-600">—</span></div>
        </div>
      </div>
    </div>

    <div class="grid lg:grid-cols-2 gap-8">
      <div class="bg-white/90 backdrop-blur rounded-2xl p-6"><h3 class="text-lg font-semibold mb-4"><i class="fas fa-edit text-purple-500 mr-2"></i><span data-i18n="pubAdvice.title">For Publishers</span></h3><p id="publisher-recommendation"></p></div>
      <div class="bg-white/90 backdrop-blur rounded-2xl p-6"><h3 class="text-lg font-semibold mb-4"><i class="fas fa-comments text-green-500 mr-2"></i><span data-i18n="prAdvice.title">PR Response Playbook</span></h3><p id="pr-recommendation"></p></div>
    </div>
  </main>

  <footer class="bg-gray-50 border-t border-gray-200 mt-16">
    <div class="max-w-7xl mx-auto px-4 py-8 text-center text-gray-600">
      <div class="mb-2">
        <button onclick="openModal('privacy')" class="hover:text-blue-600" data-i18n="footer.privacy">Privacy</button> ·
        <button onclick="openModal('terms')" class="hover:text-blue-600" data-i18n="footer.terms">Terms</button>
      </div>
      <p class="mb-2">© 2025 FactLens</p>
      <p class="text-sm" data-i18n="footer.powered">Powered by AI</p>
    </div>
  </footer>

  <!-- modal -->
  <div id="modal-bg" class="fixed inset-0 z-50 bg-black/40 hidden" onclick="closeModal()"></div>
  <div id="modal-panel" class="fixed inset-0 z-50 flex items-center justify-center px-4 hidden">
    <div class="bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[80vh] overflow-auto shadow-2xl">
      <div class="flex justify-between items-center mb-4">
        <h3 id="modal-title" class="text-lg font-semibold"></h3>
        <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
      </div>
      <div id="modal-body" class="text-gray-700 leading-relaxed"></div>
      <div class="mt-6 text-right">
        <button onclick="closeModal()" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200" data-i18n="modal.close">Close</button>
      </div>
    </div>
  </div>

  <!-- i18n & main logic -->
  <script type="module" src="/i18n/i18n.js"></script>
  <script type="module" src="/main.js"></script>
</body>
</html>
